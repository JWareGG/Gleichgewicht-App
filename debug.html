<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Debugging</title>
</head>
<body>
    <h1>Debugging-Log</h1>
    <pre id="log"></pre>

    <script>
        function logMessage(message) {
            document.getElementById("log").textContent += message + "\n";
        }

        logMessage("ğŸ“¢ Debugging gestartet!");

        // PrÃ¼ft, ob der Service Worker registriert ist
        navigator.serviceWorker.getRegistration().then(reg => {
            if (reg) {
                logMessage("âœ… Service Worker aktiv: " + JSON.stringify(reg));

                // ÃœberprÃ¼ft, ob ein Update fÃ¼r den Service Worker gefunden wird
                reg.addEventListener("updatefound", () => {
                    logMessage("ğŸ”„ Service Worker Update gefunden!");
                });

            } else {
                logMessage("âŒ Kein Service Worker gefunden!");
            }
        });

        // PrÃ¼ft, ob die Seite Ã¼ber HTTPS lÃ¤uft (erforderlich fÃ¼r Service Worker)
        logMessage("ğŸ”’ Ist HTTPS aktiv? " + location.protocol);

        // Zeigt den aktuellen Cache-Inhalt an
        caches.keys().then(keys => logMessage("ğŸ“‚ Cache Inhalte: " + keys.join(", ")));

        // Falls kein Service Worker registriert ist, registriere ihn jetzt!
        navigator.serviceWorker.register("sw.js")
            .then(reg => logMessage("âœ… Service Worker erfolgreich registriert: " + JSON.stringify(reg)))
            .catch(error => logMessage("âŒ Fehler beim Registrieren: " + error));
    </script>
</body>
</html>