<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Debugging</title>
</head>
<body>
    <h1>Debugging-Log</h1>
    <pre id="log"></pre>

    <button id="checkNotifButton">ğŸ” Benachrichtigungsstatus prÃ¼fen</button>

    <script>
        // JavaScript-Test
        alert("JavaScript funktioniert!");

        function logMessage(message) {
            document.getElementById("log").textContent += message + "\n";
            console.log(message); // Zeigt es in der Browser-Konsole an
        }

        logMessage("ğŸ“¢ Debugging gestartet!");

        // Stellt sicher, dass der Button funktioniert
        document.addEventListener("DOMContentLoaded", function() {
            document.getElementById("checkNotifButton").addEventListener("click", checkNotificationPermission);
            logMessage("âœ… Button-Event erfolgreich verbunden!");
        });

        function checkNotificationPermission() {
            logMessage("ğŸ“¢ PrÃ¼fe Benachrichtigungsstatus...");

            if (!("Notification" in window)) {
                logMessage("âŒ Dieses GerÃ¤t unterstÃ¼tzt keine Benachrichtigungen.");
                return;
            }

            logMessage("ğŸ” Aktueller Status: " + Notification.permission);

            if (Notification.permission === "denied") {
                logMessage("âŒ Benachrichtigungen wurden blockiert! Bitte in den Browser-Einstellungen aktivieren.");
            } else if (Notification.permission === "default") {
                logMessage("ğŸ”” Bitte erlaube Benachrichtigungen in der erscheinenden Anfrage.");
                requestNotificationPermission();
            } else if (Notification.permission === "granted") {
                logMessage("âœ… Benachrichtigungen sind erlaubt!");
            }
        }

        function requestNotificationPermission() {
            logMessage("ğŸ“¢ Anfrage fÃ¼r Benachrichtigungen wird gesendet...");
            
            Notification.requestPermission().then(permission => {
                logMessage("ğŸ“¢ Benutzerentscheidung: " + permission);

                if (permission === "granted") {
                    logMessage("âœ… Benachrichtigungen sind jetzt aktiviert!");
                } else {
                    logMessage("âŒ Benutzer hat Benachrichtigungen abgelehnt.");
                }
            }).catch(error => {
                logMessage("âŒ Fehler beim Anfragen der Benachrichtigungen: " + error);
            });
        }
    </script>
</body>
</html>